{
  "endpoint": "OPENAI",
  "model": "gpt-4-turbo-preview",
  "functions": [
    {
      "name": "review_diff",
      "description": "Review a unified diff and select hunks to apply or rework.",
      "parameters": {
        "type": "object",
        "properties": {
          "hunks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "number": {
                  "type": "integer",
                  "description": "Index of the hunk in the diff. Starts from 1."
                },
                "reason": {
                  "type": "string",
                  "description": "Reason for applying or ignoring this hunk, or for asking for it to be reworked."
                },
                "decision": {
                  "type": "string",
                  "enum": [
                    "apply",
                    "ignore",
                    "rework"
                  ],
                  "description": "Whether to apply this hunk, rework, or ignore it."
                }
              },
              "required": [
                "number",
                "reason",
                "decision"
              ],
              "additionalProperties": false
            }
          },
          "review_notes": {
            "type": "string"
          }
        },
        "required": [
          "hunks",
          "review_notes"
        ],
        "additionalProperties": false
      }
    }
  ],
  "response": {
    "hunks": [
      {
        "number": 1,
        "reason": "The hunk implements the user authentication system as requested, including session initialization, user registration, and login functionality. However, the placeholder 'INPUT_REQUIRED {session_secret}' needs to be replaced with an actual secret key from the environment variables for security reasons.",
        "decision": "rework"
      }
    ],
    "review_notes": "The implementation of the authentication system aligns with the task requirements, including the use of bcrypt for password hashing and express-session for session management. However, the use of a placeholder for the session secret is a security concern and should be addressed by utilizing an environment variable. Additionally, ensure that body parsing middleware (e.g., express.json()) is used in the server setup to correctly parse JSON request bodies, as this is not shown in the provided code but is necessary for the routes to function correctly."
  }
}